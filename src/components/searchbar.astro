---

---

<form id='search-form' class='flex justify-center items-center space-x-2 p-4'>
  <input
    id='search-input'
    type='search'
    placeholder='Search for scholarly articles...'
    class='border border-gray-300 rounded-full py-2 px-4 w-64 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300 ease-in-out'
  />
  <button
    type='submit'
    class='rounded-full py-2 px-6 bg-blue-600 text-white hover:bg-blue-700 transition duration-300 ease-in-out'
    >Search</button
  >
</form>

<div id='search-results' class='p-4'></div>

<script>
  async function fetchScholarlyArticles(query: string): Promise<void> {
    try {
      const response = await fetch(`/api/search?q=${encodeURIComponent(query)}`);
      
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }
      
      const data = await response.json();
      displayResults(data.results);
    } catch (error) {
      console.error('Error fetching scholarly articles:', error);
    }
  }


  function displayResults(articles: any[]): void {
    const resultsContainer = document.getElementById('search-results');
    if (!resultsContainer) return;

    resultsContainer.innerHTML = '';
    
    articles.forEach(article => {
      const articleElement = document.createElement('div');
      articleElement.className = 'mb-4 p-4 rounded';
      articleElement.innerHTML = `
        <h3 class="font-bold">${article.title}</h3>
        <p class="text-sm text-gray-600">${article.authors?.map((author: any) => author.name).join(', ') || 'Unknown Author'}</p>
        <p class="mt-2">${article.abstract || 'No abstract available'}</p>
      `;
      resultsContainer.appendChild(articleElement);
    });
  }

  document
    .getElementById('search-form')
    ?.addEventListener('submit', function (event: Event) {
      event.preventDefault();
      const input = (
        document.getElementById('search-input') as HTMLInputElement
      ).value;
      fetchScholarlyArticles(input);
    });
</script>
